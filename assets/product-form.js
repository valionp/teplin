/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (() => {
  // webpackBootstrap
  /******/ var __webpack_modules__ = {
    /***/ "./src/js/components/product-form.js":
      /*!*******************************************!*\
  !*** ./src/js/components/product-form.js ***!
  \*******************************************/
      /***/ () => {
        eval(
          "if (!customElements.get('product-form')) {\n  customElements.define(\n    'product-form',\n    class ProductForm extends HTMLElement {\n      constructor() {\n        super();\n\n        this.form = this.querySelector('form');\n        this.form.querySelector('[name=id]').disabled = false;\n        this.form.addEventListener('submit', this.onSubmitHandler.bind(this));\n        this.cart = document.querySelector('cart-notification') || document.querySelector('cart-drawer');\n        this.submitButton = this.querySelector('[type=\"submit\"]');\n\n        if (document.querySelector('cart-drawer')) this.submitButton.setAttribute('aria-haspopup', 'dialog');\n\n        this.hideErrors = this.dataset.hideErrors === 'true';\n      }\n\n      onSubmitHandler(evt) {\n        evt.preventDefault();\n        if (this.submitButton.getAttribute('aria-disabled') === 'true') return;\n\n        this.handleErrorMessage();\n\n        this.submitButton.setAttribute('aria-disabled', true);\n        this.submitButton.classList.add('loading');\n        this.querySelector('.loading__spinner').classList.remove('hidden');\n\n        const config = fetchConfig('javascript');\n        config.headers['X-Requested-With'] = 'XMLHttpRequest';\n        delete config.headers['Content-Type'];\n\n        const formData = new FormData(this.form);\n        if (this.cart) {\n          formData.append(\n            'sections',\n            this.cart.getSectionsToRender().map((section) => section.id)\n          );\n          formData.append('sections_url', window.location.pathname);\n          this.cart.setActiveElement(document.activeElement);\n        }\n        config.body = formData;\n\n        fetch(`${routes.cart_add_url}`, config)\n          .then((response) => response.json())\n          .then((response) => {\n            if (response.status) {\n              publish(PUB_SUB_EVENTS.cartError, {\n                source: 'product-form',\n                productVariantId: formData.get('id'),\n                errors: response.errors || response.description,\n                message: response.message,\n              });\n              this.handleErrorMessage(response.description);\n\n              const soldOutMessage = this.submitButton.querySelector('.sold-out-message');\n              if (!soldOutMessage) return;\n              this.submitButton.setAttribute('aria-disabled', true);\n              this.submitButton.querySelector('span').classList.add('hidden');\n              soldOutMessage.classList.remove('hidden');\n              this.error = true;\n              return;\n            } else if (!this.cart) {\n              window.location = window.routes.cart_url;\n              return;\n            }\n\n            if (!this.error)\n              publish(PUB_SUB_EVENTS.cartUpdate, {\n                source: 'product-form',\n                productVariantId: formData.get('id'),\n                cartData: response,\n              });\n            this.error = false;\n            const quickAddModal = this.closest('quick-add-modal');\n            if (quickAddModal) {\n              document.body.addEventListener(\n                'modalClosed',\n                () => {\n                  setTimeout(() => {\n                    this.cart.renderContents(response);\n                  });\n                },\n                { once: true }\n              );\n              quickAddModal.hide(true);\n            } else {\n              this.cart.renderContents(response);\n            }\n          })\n          .catch((e) => {\n            console.error(e);\n          })\n          .finally(() => {\n            this.submitButton.classList.remove('loading');\n            if (this.cart && this.cart.classList.contains('is-empty')) this.cart.classList.remove('is-empty');\n            if (!this.error) this.submitButton.removeAttribute('aria-disabled');\n            this.querySelector('.loading__spinner').classList.add('hidden');\n          });\n      }\n\n      handleErrorMessage(errorMessage = false) {\n        if (this.hideErrors) return;\n\n        this.errorMessageWrapper =\n          this.errorMessageWrapper || this.querySelector('.product-form__error-message-wrapper');\n        if (!this.errorMessageWrapper) return;\n        this.errorMessage = this.errorMessage || this.errorMessageWrapper.querySelector('.product-form__error-message');\n\n        this.errorMessageWrapper.toggleAttribute('hidden', !errorMessage);\n\n        if (errorMessage) {\n          this.errorMessage.textContent = errorMessage;\n        }\n      }\n    }\n  );\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvanMvY29tcG9uZW50cy9wcm9kdWN0LWZvcm0uanMuanMiLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9sZWFybi13ZWJwYWNrLy4vc3JjL2pzL2NvbXBvbmVudHMvcHJvZHVjdC1mb3JtLmpzP2JmMWEiXSwic291cmNlc0NvbnRlbnQiOlsiaWYgKCFjdXN0b21FbGVtZW50cy5nZXQoJ3Byb2R1Y3QtZm9ybScpKSB7XG4gIGN1c3RvbUVsZW1lbnRzLmRlZmluZShcbiAgICAncHJvZHVjdC1mb3JtJyxcbiAgICBjbGFzcyBQcm9kdWN0Rm9ybSBleHRlbmRzIEhUTUxFbGVtZW50IHtcbiAgICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlcigpO1xuXG4gICAgICAgIHRoaXMuZm9ybSA9IHRoaXMucXVlcnlTZWxlY3RvcignZm9ybScpO1xuICAgICAgICB0aGlzLmZvcm0ucXVlcnlTZWxlY3RvcignW25hbWU9aWRdJykuZGlzYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5mb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIHRoaXMub25TdWJtaXRIYW5kbGVyLmJpbmQodGhpcykpO1xuICAgICAgICB0aGlzLmNhcnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdjYXJ0LW5vdGlmaWNhdGlvbicpIHx8IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2NhcnQtZHJhd2VyJyk7XG4gICAgICAgIHRoaXMuc3VibWl0QnV0dG9uID0gdGhpcy5xdWVyeVNlbGVjdG9yKCdbdHlwZT1cInN1Ym1pdFwiXScpO1xuXG4gICAgICAgIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdjYXJ0LWRyYXdlcicpKSB0aGlzLnN1Ym1pdEJ1dHRvbi5zZXRBdHRyaWJ1dGUoJ2FyaWEtaGFzcG9wdXAnLCAnZGlhbG9nJyk7XG5cbiAgICAgICAgdGhpcy5oaWRlRXJyb3JzID0gdGhpcy5kYXRhc2V0LmhpZGVFcnJvcnMgPT09ICd0cnVlJztcbiAgICAgIH1cblxuICAgICAgb25TdWJtaXRIYW5kbGVyKGV2dCkge1xuICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgaWYgKHRoaXMuc3VibWl0QnV0dG9uLmdldEF0dHJpYnV0ZSgnYXJpYS1kaXNhYmxlZCcpID09PSAndHJ1ZScpIHJldHVybjtcblxuICAgICAgICB0aGlzLmhhbmRsZUVycm9yTWVzc2FnZSgpO1xuXG4gICAgICAgIHRoaXMuc3VibWl0QnV0dG9uLnNldEF0dHJpYnV0ZSgnYXJpYS1kaXNhYmxlZCcsIHRydWUpO1xuICAgICAgICB0aGlzLnN1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdsb2FkaW5nJyk7XG4gICAgICAgIHRoaXMucXVlcnlTZWxlY3RvcignLmxvYWRpbmdfX3NwaW5uZXInKS5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTtcblxuICAgICAgICBjb25zdCBjb25maWcgPSBmZXRjaENvbmZpZygnamF2YXNjcmlwdCcpO1xuICAgICAgICBjb25maWcuaGVhZGVyc1snWC1SZXF1ZXN0ZWQtV2l0aCddID0gJ1hNTEh0dHBSZXF1ZXN0JztcbiAgICAgICAgZGVsZXRlIGNvbmZpZy5oZWFkZXJzWydDb250ZW50LVR5cGUnXTtcblxuICAgICAgICBjb25zdCBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSh0aGlzLmZvcm0pO1xuICAgICAgICBpZiAodGhpcy5jYXJ0KSB7XG4gICAgICAgICAgZm9ybURhdGEuYXBwZW5kKFxuICAgICAgICAgICAgJ3NlY3Rpb25zJyxcbiAgICAgICAgICAgIHRoaXMuY2FydC5nZXRTZWN0aW9uc1RvUmVuZGVyKCkubWFwKChzZWN0aW9uKSA9PiBzZWN0aW9uLmlkKVxuICAgICAgICAgICk7XG4gICAgICAgICAgZm9ybURhdGEuYXBwZW5kKCdzZWN0aW9uc191cmwnLCB3aW5kb3cubG9jYXRpb24ucGF0aG5hbWUpO1xuICAgICAgICAgIHRoaXMuY2FydC5zZXRBY3RpdmVFbGVtZW50KGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQpO1xuICAgICAgICB9XG4gICAgICAgIGNvbmZpZy5ib2R5ID0gZm9ybURhdGE7XG5cbiAgICAgICAgZmV0Y2goYCR7cm91dGVzLmNhcnRfYWRkX3VybH1gLCBjb25maWcpXG4gICAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiByZXNwb25zZS5qc29uKCkpXG4gICAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7XG4gICAgICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzKSB7XG4gICAgICAgICAgICAgIHB1Ymxpc2goUFVCX1NVQl9FVkVOVFMuY2FydEVycm9yLCB7XG4gICAgICAgICAgICAgICAgc291cmNlOiAncHJvZHVjdC1mb3JtJyxcbiAgICAgICAgICAgICAgICBwcm9kdWN0VmFyaWFudElkOiBmb3JtRGF0YS5nZXQoJ2lkJyksXG4gICAgICAgICAgICAgICAgZXJyb3JzOiByZXNwb25zZS5lcnJvcnMgfHwgcmVzcG9uc2UuZGVzY3JpcHRpb24sXG4gICAgICAgICAgICAgICAgbWVzc2FnZTogcmVzcG9uc2UubWVzc2FnZSxcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIHRoaXMuaGFuZGxlRXJyb3JNZXNzYWdlKHJlc3BvbnNlLmRlc2NyaXB0aW9uKTtcblxuICAgICAgICAgICAgICBjb25zdCBzb2xkT3V0TWVzc2FnZSA9IHRoaXMuc3VibWl0QnV0dG9uLnF1ZXJ5U2VsZWN0b3IoJy5zb2xkLW91dC1tZXNzYWdlJyk7XG4gICAgICAgICAgICAgIGlmICghc29sZE91dE1lc3NhZ2UpIHJldHVybjtcbiAgICAgICAgICAgICAgdGhpcy5zdWJtaXRCdXR0b24uc2V0QXR0cmlidXRlKCdhcmlhLWRpc2FibGVkJywgdHJ1ZSk7XG4gICAgICAgICAgICAgIHRoaXMuc3VibWl0QnV0dG9uLnF1ZXJ5U2VsZWN0b3IoJ3NwYW4nKS5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcbiAgICAgICAgICAgICAgc29sZE91dE1lc3NhZ2UuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7XG4gICAgICAgICAgICAgIHRoaXMuZXJyb3IgPSB0cnVlO1xuICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9IGVsc2UgaWYgKCF0aGlzLmNhcnQpIHtcbiAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uID0gd2luZG93LnJvdXRlcy5jYXJ0X3VybDtcbiAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoIXRoaXMuZXJyb3IpXG4gICAgICAgICAgICAgIHB1Ymxpc2goUFVCX1NVQl9FVkVOVFMuY2FydFVwZGF0ZSwge1xuICAgICAgICAgICAgICAgIHNvdXJjZTogJ3Byb2R1Y3QtZm9ybScsXG4gICAgICAgICAgICAgICAgcHJvZHVjdFZhcmlhbnRJZDogZm9ybURhdGEuZ2V0KCdpZCcpLFxuICAgICAgICAgICAgICAgIGNhcnREYXRhOiByZXNwb25zZSxcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLmVycm9yID0gZmFsc2U7XG4gICAgICAgICAgICBjb25zdCBxdWlja0FkZE1vZGFsID0gdGhpcy5jbG9zZXN0KCdxdWljay1hZGQtbW9kYWwnKTtcbiAgICAgICAgICAgIGlmIChxdWlja0FkZE1vZGFsKSB7XG4gICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuYWRkRXZlbnRMaXN0ZW5lcihcbiAgICAgICAgICAgICAgICAnbW9kYWxDbG9zZWQnLFxuICAgICAgICAgICAgICAgICgpID0+IHtcbiAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNhcnQucmVuZGVyQ29udGVudHMocmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7IG9uY2U6IHRydWUgfVxuICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICBxdWlja0FkZE1vZGFsLmhpZGUodHJ1ZSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICB0aGlzLmNhcnQucmVuZGVyQ29udGVudHMocmVzcG9uc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pXG4gICAgICAgICAgLmNhdGNoKChlKSA9PiB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGUpO1xuICAgICAgICAgIH0pXG4gICAgICAgICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5zdWJtaXRCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSgnbG9hZGluZycpO1xuICAgICAgICAgICAgaWYgKHRoaXMuY2FydCAmJiB0aGlzLmNhcnQuY2xhc3NMaXN0LmNvbnRhaW5zKCdpcy1lbXB0eScpKSB0aGlzLmNhcnQuY2xhc3NMaXN0LnJlbW92ZSgnaXMtZW1wdHknKTtcbiAgICAgICAgICAgIGlmICghdGhpcy5lcnJvcikgdGhpcy5zdWJtaXRCdXR0b24ucmVtb3ZlQXR0cmlidXRlKCdhcmlhLWRpc2FibGVkJyk7XG4gICAgICAgICAgICB0aGlzLnF1ZXJ5U2VsZWN0b3IoJy5sb2FkaW5nX19zcGlubmVyJykuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7XG4gICAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIGhhbmRsZUVycm9yTWVzc2FnZShlcnJvck1lc3NhZ2UgPSBmYWxzZSkge1xuICAgICAgICBpZiAodGhpcy5oaWRlRXJyb3JzKSByZXR1cm47XG5cbiAgICAgICAgdGhpcy5lcnJvck1lc3NhZ2VXcmFwcGVyID1cbiAgICAgICAgICB0aGlzLmVycm9yTWVzc2FnZVdyYXBwZXIgfHwgdGhpcy5xdWVyeVNlbGVjdG9yKCcucHJvZHVjdC1mb3JtX19lcnJvci1tZXNzYWdlLXdyYXBwZXInKTtcbiAgICAgICAgaWYgKCF0aGlzLmVycm9yTWVzc2FnZVdyYXBwZXIpIHJldHVybjtcbiAgICAgICAgdGhpcy5lcnJvck1lc3NhZ2UgPSB0aGlzLmVycm9yTWVzc2FnZSB8fCB0aGlzLmVycm9yTWVzc2FnZVdyYXBwZXIucXVlcnlTZWxlY3RvcignLnByb2R1Y3QtZm9ybV9fZXJyb3ItbWVzc2FnZScpO1xuXG4gICAgICAgIHRoaXMuZXJyb3JNZXNzYWdlV3JhcHBlci50b2dnbGVBdHRyaWJ1dGUoJ2hpZGRlbicsICFlcnJvck1lc3NhZ2UpO1xuXG4gICAgICAgIGlmIChlcnJvck1lc3NhZ2UpIHtcbiAgICAgICAgICB0aGlzLmVycm9yTWVzc2FnZS50ZXh0Q29udGVudCA9IGVycm9yTWVzc2FnZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgKTtcbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/js/components/product-form.js\n"
        );

        /***/
      },

    /******/
  };
  /************************************************************************/
  /******/
  /******/ // startup
  /******/ // Load entry module and return exports
  /******/ // This entry module can't be inlined because the eval-source-map devtool is used.
  /******/ var __webpack_exports__ = {};
  /******/ __webpack_modules__["./src/js/components/product-form.js"]();
  /******/
  /******/
})();
